{"componentChunkName":"component---src-templates-blog-post-js","path":"/Prometheus/2022-06-23-[Prometheus]Exporter-알아보기/","result":{"data":{"site":{"siteMetadata":{"title":"3DPIT Study Blog","author":"[KyeongMinPark]","siteUrl":"https://3dpit.github.io","comment":{"disqusShortName":"","utterances":"3dpit/3dpit.github.io"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"16ad1e99-438d-53c6-b66f-092ebb02e73d","excerpt":"2022-06-23-PrometheusExporter-알아보기 목차 01.Exporter란? 02.docker로 exporter 설치 03.systemctl로 설치 01.Exporter란? 특정 메트릭을 수집해서 외부로 노출시키는 애플리케이션 02.docker로 exporter 설치 node exporter github  현재 호스트의 루트 볼륨이 수정되지 않도록 ro: read only와 호스트의 read only 수정사항을 받아오도록 rslave 설정 node exporter…","html":"<h2 id=\"2022-06-23-prometheusexporter-알아보기\" style=\"position:relative;\"><a href=\"#2022-06-23-prometheusexporter-%EC%95%8C%EC%95%84%EB%B3%B4%EA%B8%B0\" aria-label=\"2022 06 23 prometheusexporter 알아보기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2022-06-23-[Prometheus]Exporter-알아보기</h2>\n<h2 id=\"목차\" style=\"position:relative;\"><a href=\"#%EB%AA%A9%EC%B0%A8\" aria-label=\"목차 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>목차</h2>\n<blockquote>\n<p>01.Exporter란?</p>\n<p>02.docker로 exporter 설치</p>\n<p>03.systemctl로 설치</p>\n</blockquote>\n<h2 id=\"01exporter란\" style=\"position:relative;\"><a href=\"#01exporter%EB%9E%80\" aria-label=\"01exporter란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>01.Exporter란?</h2>\n<ul>\n<li>특정 메트릭을 수집해서 외부로 노출시키는 애플리케이션</li>\n</ul>\n<h2 id=\"02docker로-exporter-설치\" style=\"position:relative;\"><a href=\"#02docker%EB%A1%9C-exporter-%EC%84%A4%EC%B9%98\" aria-label=\"02docker로 exporter 설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>02.docker로 exporter 설치</h2>\n<ul>\n<li><a href=\"https://github.com/prometheus/node_exporter\">node exporter github</a></li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">docker run -d \\\n-p 9100:9100 \\\n--name=node_exporter \\\n--pid=host \\\n-v &quot;/:/host:ro,rslave&quot; \\\nquay.io/prometheus/node-exporter:latest \\\n--path.rootfs=/host</code></pre></div>\n<ul>\n<li>\n<p><code class=\"language-text\">-v \"/:/host:ro,rslave\" \\</code></p>\n<ul>\n<li>현재 호스트의 루트 볼륨이 수정되지 않도록 ro: read only와</li>\n<li>호스트의 read only 수정사항을 받아오도록 rslave 설정</li>\n</ul>\n</li>\n<li>node exporter에서 모니터링할 루트파일 시스템을 /host로 host로 지정하여 실행</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1106px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAABP0lEQVQ4y42T7Y6CQAxFef+3IxFEQBSJCT8w4rciUPc06WSyK7qT3NSoHG57O0GxWsnqR5vNRuq6lv1+L8fjUS6Xi5xOJzmfz1r5jnq9XlX8jp7Pp4zjKMMwaA3m87nEcSx5nkuaplJVlfuzAe0zIB7yAcg/ASBUFIWs12uFHg4HBwV4u93UydQxsDrMskySJFEQ4NlsJrvdTkHW5uPx+POgL/tNHQJDi8VCgbwACO7u9/tXwO8T0Krf9na7laZp1B0ukTn0W5w6LhQqbYdhqGkbDDBh9H2v+urQ3BEI61OWpc4QCEAqrTMCwiHdj0BmxvyorIzfLqCpVKegLhSAOGSGbduqM2Zni9x13f9DAbZcLp24Lf4NsZtDy+b63VK7UKIocqvDC1hsm6EJhxbMRyDukDlljv6Vs9ti8h2+Oy8HMecAgBT0AAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20220623094642764\"\n        title=\"image-20220623094642764\"\n        src=\"/static/0ff83b889c887b10610fc93b5b5ddf6c/8740f/image-20220623094642764.png\"\n        srcset=\"/static/0ff83b889c887b10610fc93b5b5ddf6c/5a46d/image-20220623094642764.png 300w,\n/static/0ff83b889c887b10610fc93b5b5ddf6c/0a47e/image-20220623094642764.png 600w,\n/static/0ff83b889c887b10610fc93b5b5ddf6c/8740f/image-20220623094642764.png 1106w\"\n        sizes=\"(max-width: 1106px) 100vw, 1106px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<ul>\n<li>localhost:9100에 접속하면 수집이 되는 것을 알 수 있음</li>\n</ul>\n<h2 id=\"03systemctl로-설치\" style=\"position:relative;\"><a href=\"#03systemctl%EB%A1%9C-%EC%84%A4%EC%B9%98\" aria-label=\"03systemctl로 설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>03.systemctl로 설치</h2>\n<ul>\n<li>\n<p><a href=\"https://prometheus.io/docs/guides/node-exporter/\">다운로드 링크</a></p>\n<ul>\n<li><a href=\"https://prometheus.io/download/\">링크 주소 복사를위한 페이지</a></li>\n<li><code class=\"language-text\">https://github.com/prometheus/node_exporter/releases/download/v1.3.1/node_exporter-1.3.1.linux-amd64.tar.gz</code></li>\n</ul>\n</li>\n<li>\n<p>wget으로 받아오기</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">wget https://github.com/prometheus/node_exporter/releases/download/v1.3.1/node_exporter-1.3.1.linux-amd64.tar.gz</code></pre></div>\n</li>\n<li>\n<p>압축 풀기</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">tar xvzf node_exporter-1.3.1.linux-amd64.tar.gz</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1103px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 14.666666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAh0lEQVQI123NuQ7DIBAEUNcYCTBUuAhWLA4RfOD//7YJa4kUSYqRZop9OxwxosaEEgL8w909OgetFNQ0wRgDRb1Fa31vKSXGcQTn/CdDTglbznguC/y6ou47cnsyW3sjU0MJoFDvm8B/6LA14DhPhIZ471GvC69SYOcZQggwxj7H1PvuwDf6Bl8US7KWFsT1AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20220623134939343\"\n        title=\"image-20220623134939343\"\n        src=\"/static/5f898bbb1d5c61ba2991157c594efc6e/b6e34/image-20220623134939343.png\"\n        srcset=\"/static/5f898bbb1d5c61ba2991157c594efc6e/5a46d/image-20220623134939343.png 300w,\n/static/5f898bbb1d5c61ba2991157c594efc6e/0a47e/image-20220623134939343.png 600w,\n/static/5f898bbb1d5c61ba2991157c594efc6e/b6e34/image-20220623134939343.png 1103w\"\n        sizes=\"(max-width: 1103px) 100vw, 1103px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n</li>\n<li>\n<p>실행하기</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">cd node_exporter-1.3.1.linux-amd64/\n\n./node_exporter</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 747px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 8.666666666666668%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAbElEQVQI1z2NwQrEIAxE+wF61Comrpj00FsD6/9/2iwRtofHkDcwOcwMay3YY5Bngm7C9VWoKcYYmHOi9w5V3Vlr3TAzRGR7v0MIiDHicPmHJuH8nOgXg4XRWgMRvQOlFKSUkHN+nffu/JnzA2OINj/TtH/yAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20220623135055247\"\n        title=\"image-20220623135055247\"\n        src=\"/static/1f413b5b0f18d1ad1b9e552e09442c46/d54e4/image-20220623135055247.png\"\n        srcset=\"/static/1f413b5b0f18d1ad1b9e552e09442c46/5a46d/image-20220623135055247.png 300w,\n/static/1f413b5b0f18d1ad1b9e552e09442c46/0a47e/image-20220623135055247.png 600w,\n/static/1f413b5b0f18d1ad1b9e552e09442c46/d54e4/image-20220623135055247.png 747w\"\n        sizes=\"(max-width: 747px) 100vw, 747px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n</li>\n<li>\n<p>설정하기</p>\n<ul>\n<li>다운받은 tar파일 opt아래에 풀기</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\"> tar -C /opt -xvzf node_exporter-1.3.1.linux-amd64.tar.gz</code></pre></div>\n<ul>\n<li>링크 걸어주기</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">ln -s /opt/node_exporter-1.3.1.linux-amd64/ /opt/node_exporter</code></pre></div>\n<ul>\n<li>버전 관리를 용이하게 하기위한 링크</li>\n<li>옵션을 위한 파일 만들기</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">echo &quot;OPTION=&quot; &gt; /etc/default/node_exporter</code></pre></div>\n<ul>\n<li>systemctl를 위한 파일 작성</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">cat &lt;&lt; EOF &gt; /etc/systemd/system/node_exporter.service\n[Service]\nUser=root\nEnvironmentFile=/etc/defalut/node_exporter\nExecStart=/opt/node_exporter/node_exporter\nEOF</code></pre></div>\n<ul>\n<li>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">systemctl daemon-reload</code></pre></div>\n</li>\n</ul>\n<p>systemctl start node_exporter.service</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"></code></pre></div>\n</li>\n</ul>","frontmatter":{"title":"Prometheus Exporter 알아보기","date":"June 23, 2022"}}},"pageContext":{"slug":"/Prometheus/2022-06-23-[Prometheus]Exporter-알아보기/","previous":{"fields":{"slug":"/Prometheus/2022-06-23-[Prometheus]Prometheus설정-살펴보기/"},"frontmatter":{"title":"Prometheus Prometheus설정 살펴보기"}},"next":{"fields":{"slug":"/Prometheus/2022-06-22-[Prometheus]Docker를-이용하여-Prometheus설치하기/"},"frontmatter":{"title":"Prometheus Docker를 이용하여 Prometheus설치하기"}}}},"staticQueryHashes":["2486386679","3128451518"]}