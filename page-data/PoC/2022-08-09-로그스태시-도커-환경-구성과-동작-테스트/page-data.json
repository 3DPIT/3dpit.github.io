{"componentChunkName":"component---src-templates-blog-post-js","path":"/PoC/2022-08-09-로그스태시-도커-환경-구성과-동작-테스트/","result":{"data":{"site":{"siteMetadata":{"title":"3DPIT Study Blog","author":"[KyeongMinPark]","siteUrl":"https://3dpit.github.io","comment":{"disqusShortName":"","utterances":"3dpit/3dpit.github.io"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"859b108a-770e-5e4d-a379-700db51d9792","excerpt":"2022-08-09-로그스태시-도커-환경-구성과-동작-테스트 Summary 목차 01.로그 스태시 docker-compose.yml 파일 02.볼륨 준비 02.0 .env 02.1 config/remotebeat/ 02.2 config/remotebeat/ 02.3 config/remotebeat/pipeline/ 02.4 config/remotebeat/files/ 03.remotebeat 실행하기 remotebeat에서 찍히는 것 API 콘솔에서 찍히는것 01.로그 스태시 docker…","html":"<h2 id=\"2022-08-09-로그스태시-도커-환경-구성과-동작-테스트\" style=\"position:relative;\"><a href=\"#2022-08-09-%EB%A1%9C%EA%B7%B8%EC%8A%A4%ED%83%9C%EC%8B%9C-%EB%8F%84%EC%BB%A4-%ED%99%98%EA%B2%BD-%EA%B5%AC%EC%84%B1%EA%B3%BC-%EB%8F%99%EC%9E%91-%ED%85%8C%EC%8A%A4%ED%8A%B8\" aria-label=\"2022 08 09 로그스태시 도커 환경 구성과 동작 테스트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2022-08-09-로그스태시-도커-환경-구성과-동작-테스트</h2>\n<blockquote>\n<p>Summary</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token comment\"># docker-compose.yml 파일</span>\n<span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'2'</span>\n\n<span class=\"token key atrule\">services</span><span class=\"token punctuation\">:</span>\n <span class=\"token key atrule\">remotebeat</span><span class=\"token punctuation\">:</span>\n   <span class=\"token key atrule\">restart</span><span class=\"token punctuation\">:</span> always\n   <span class=\"token key atrule\">container_name</span><span class=\"token punctuation\">:</span> remotebeat\n   <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> docker.elastic.co/logstash/logstash<span class=\"token punctuation\">-</span>oss<span class=\"token punctuation\">:</span>7.10.2\n   <span class=\"token key atrule\">env_file</span><span class=\"token punctuation\">:</span> \n   <span class=\"token punctuation\">-</span> .env\n   <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span>\n   <span class=\"token punctuation\">-</span> bootstrap.memory_lock=true \n   <span class=\"token punctuation\">-</span> <span class=\"token string\">\"LS_JAVA_OPTS=-Xms2g -Xmx2g\"</span> \n   <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n   <span class=\"token punctuation\">-</span> ./config/remotebeat/logstash.yml<span class=\"token punctuation\">:</span>/usr/share/logstash/config/logstash.yml\n   <span class=\"token punctuation\">-</span> ./config/remotebeat/pipelines.yml<span class=\"token punctuation\">:</span>/usr/share/logstash/config/pipelines.yml\n   <span class=\"token punctuation\">-</span> ./config/remotebeat/pipeline/<span class=\"token punctuation\">:</span>/usr/share/logstash/pipeline/    \n   <span class=\"token punctuation\">-</span> ./config/remotebeat/remotebeat<span class=\"token punctuation\">-</span>data<span class=\"token punctuation\">:</span>/usr/share/logstash/data/\n   <span class=\"token punctuation\">-</span> ./config/remotebeat/files/<span class=\"token punctuation\">:</span>/usr/share/logstash/files/\n   <span class=\"token key atrule\">network_mode</span><span class=\"token punctuation\">:</span> host\n   <span class=\"token key atrule\">user</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">:</span><span class=\"token number\">0</span>\n   <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>config.reload.automatic\n\n<span class=\"token comment\"># .env</span>\nREMOTE_SITE=CHANGE_ME\nREMOTE_KAFKA_HOST=127.0.0.1<span class=\"token punctuation\">:</span><span class=\"token number\">7710</span>\nCOMPOSE_PROJECT_NAME=REMOTEBEAT\n\n<span class=\"token comment\"># config/remotebeat/logstash.yml</span>\n<span class=\"token key atrule\">http.host</span><span class=\"token punctuation\">:</span> 0.0.0.0\n<span class=\"token key atrule\">pipeline.workers</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n\n<span class=\"token comment\"># config/remotebeat/pipelines.yml</span>\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">pipeline.id</span><span class=\"token punctuation\">:</span> logstash\n <span class=\"token key atrule\">pipeline.workers</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span>\n <span class=\"token key atrule\">path.config</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"/usr/share/logstash/pipeline/logstash.conf\"</span>\n \n<span class=\"token comment\"># config/remotebeat/pipeline/logstash.conf</span>\ninput <span class=\"token punctuation\">{</span>  \n file <span class=\"token punctuation\">{</span>\n   path =<span class=\"token punctuation\">></span> \"/usr/share/logstash/files/test.txt\"\n   start_position =<span class=\"token punctuation\">></span> \"beginning\"\n\tstat_interval =<span class=\"token punctuation\">></span> 1\n   type =<span class=\"token punctuation\">></span> textfile\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\noutput <span class=\"token punctuation\">{</span>  \n stdout <span class=\"token punctuation\">{</span> codec =<span class=\"token punctuation\">></span> rubydebug <span class=\"token punctuation\">}</span>\n stdout <span class=\"token punctuation\">{</span> codec =<span class=\"token punctuation\">></span> json <span class=\"token punctuation\">}</span>\nhttp <span class=\"token punctuation\">{</span>\n\turl =<span class=\"token punctuation\">></span> \"http<span class=\"token punctuation\">:</span>//127.0.0.1<span class=\"token punctuation\">:</span>49154/v2/log\"\n\thttp_method =<span class=\"token punctuation\">></span> \"post\"\n           format =<span class=\"token punctuation\">></span> \"json\"\n\tmapping =<span class=\"token punctuation\">></span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"message\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"%{message}\"</span><span class=\"token punctuation\">]</span>\n <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\"># config/remotebeat/files/test.txt</span>\nlogstash test txt files read\n\n<span class=\"token comment\"># docker-compose.yml 위치에서 명령어 입력</span>\ndocker<span class=\"token punctuation\">-</span>compose up</code></pre></div>\n</blockquote>\n<h2 id=\"목차\" style=\"position:relative;\"><a href=\"#%EB%AA%A9%EC%B0%A8\" aria-label=\"목차 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>목차</h2>\n<blockquote>\n<p>01.로그 스태시 docker-compose.yml 파일</p>\n<p>02.볼륨 준비</p>\n<p>02.0 .env</p>\n<blockquote>\n<p>02.1 config/remotebeat/<code class=\"language-text\">logstash.yml</code></p>\n<p>02.2 config/remotebeat/<code class=\"language-text\">pipelines.yml</code></p>\n<p>02.3 config/remotebeat/pipeline/<code class=\"language-text\">logstash.conf</code></p>\n<p>02.4 config/remotebeat/files/<code class=\"language-text\">test.txt</code></p>\n</blockquote>\n<p>03.remotebeat 실행하기</p>\n<blockquote>\n<p>remotebeat에서 찍히는 것</p>\n<p>API 콘솔에서 찍히는것</p>\n</blockquote>\n</blockquote>\n<h2 id=\"01로그-스태시-docker-composeyml-파일\" style=\"position:relative;\"><a href=\"#01%EB%A1%9C%EA%B7%B8-%EC%8A%A4%ED%83%9C%EC%8B%9C-docker-composeyml-%ED%8C%8C%EC%9D%BC\" aria-label=\"01로그 스태시 docker composeyml 파일 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>01.로그 스태시 docker-compose.yml 파일</h2>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'2'</span>\n\n<span class=\"token key atrule\">services</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">remotebeat</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">restart</span><span class=\"token punctuation\">:</span> always\n    <span class=\"token key atrule\">container_name</span><span class=\"token punctuation\">:</span> remotebeat\n    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> docker.elastic.co/logstash/logstash<span class=\"token punctuation\">-</span>oss<span class=\"token punctuation\">:</span>7.10.2\n    <span class=\"token key atrule\">env_file</span><span class=\"token punctuation\">:</span> \n    <span class=\"token punctuation\">-</span> .env\n    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> bootstrap.memory_lock=true \n    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"LS_JAVA_OPTS=-Xms2g -Xmx2g\"</span> \n    <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> ./config/remotebeat/logstash.yml<span class=\"token punctuation\">:</span>/usr/share/logstash/config/logstash.yml\n    <span class=\"token punctuation\">-</span> ./config/remotebeat/pipelines.yml<span class=\"token punctuation\">:</span>/usr/share/logstash/config/pipelines.yml\n    <span class=\"token punctuation\">-</span> ./config/remotebeat/pipeline/<span class=\"token punctuation\">:</span>/usr/share/logstash/pipeline/    \n    <span class=\"token punctuation\">-</span> ./config/remotebeat/remotebeat<span class=\"token punctuation\">-</span>data<span class=\"token punctuation\">:</span>/usr/share/logstash/data/\n    <span class=\"token punctuation\">-</span> ./config/remotebeat/files/<span class=\"token punctuation\">:</span>/usr/share/logstash/files/\n    <span class=\"token key atrule\">network_mode</span><span class=\"token punctuation\">:</span> host\n    <span class=\"token key atrule\">user</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">:</span><span class=\"token number\">0</span>\n    <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>config.reload.automatic</code></pre></div>\n<h2 id=\"02볼륨-준비\" style=\"position:relative;\"><a href=\"#02%EB%B3%BC%EB%A5%A8-%EC%A4%80%EB%B9%84\" aria-label=\"02볼륨 준비 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>02.볼륨 준비</h2>\n<ul>\n<li>.env</li>\n<li>\n<p>config | 폴더</p>\n<ul>\n<li>remotebeat |폴더</li>\n<li>logstash.yml</li>\n<li>pipelines.yml</li>\n<li>\n<p>pipeline | 폴더</p>\n<ul>\n<li>logstash.conf</li>\n</ul>\n</li>\n<li>\n<p>files | 폴더</p>\n<ul>\n<li>test.txt</li>\n</ul>\n</li>\n<li>remotebeat-data |폴더</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"020-env\" style=\"position:relative;\"><a href=\"#020-env\" aria-label=\"020 env permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>02.0 .env</h2>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\">REMOTE_SITE=CHANGE_ME\nREMOTE_KAFKA_HOST=127.0.0.1<span class=\"token punctuation\">:</span><span class=\"token number\">7710</span>\nCOMPOSE_PROJECT_NAME=REMOTEBEAT</code></pre></div>\n<ul>\n<li>\n<p>사실상 REMOTE<em>SITE=CHANGE</em>ME, REMOTE<em>KAFKA</em>HOST=127.0.0.1:7710</p>\n<ul>\n<li>여기 단계에서는 사실상 필요는 없음</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"021-configremotebeatcode-classlanguage-textlogstashymlcode\" style=\"position:relative;\"><a href=\"#021-configremotebeatcode-classlanguage-textlogstashymlcode\" aria-label=\"021 configremotebeatcode classlanguage textlogstashymlcode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>02.1 config/remotebeat/<code class=\"language-text\">logstash.yml</code></h3>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">http.host</span><span class=\"token punctuation\">:</span> 0.0.0.0\n<span class=\"token key atrule\">pipeline.workers</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n<span class=\"token comment\">#log.level: debug</span></code></pre></div>\n<h3 id=\"022-configremotebeatcode-classlanguage-textpipelinesymlcode\" style=\"position:relative;\"><a href=\"#022-configremotebeatcode-classlanguage-textpipelinesymlcode\" aria-label=\"022 configremotebeatcode classlanguage textpipelinesymlcode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>02.2 config/remotebeat/<code class=\"language-text\">pipelines.yml</code></h3>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token punctuation\">-</span> <span class=\"token key atrule\">pipeline.id</span><span class=\"token punctuation\">:</span> logstash\n  <span class=\"token key atrule\">pipeline.workers</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span>\n  <span class=\"token key atrule\">path.config</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"/usr/share/logstash/pipeline/logstash.conf\"</span></code></pre></div>\n<h3 id=\"023-configremotebeatpipelinecode-classlanguage-textlogstashconfcode\" style=\"position:relative;\"><a href=\"#023-configremotebeatpipelinecode-classlanguage-textlogstashconfcode\" aria-label=\"023 configremotebeatpipelinecode classlanguage textlogstashconfcode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>02.3 config/remotebeat/pipeline/<code class=\"language-text\">logstash.conf</code></h3>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\">input <span class=\"token punctuation\">{</span>  \n  file <span class=\"token punctuation\">{</span>\n    path =<span class=\"token punctuation\">></span> \"/usr/share/logstash/files/test.txt\"\n    start_position =<span class=\"token punctuation\">></span> \"beginning\"\n\tstat_interval =<span class=\"token punctuation\">></span> 1\n    type =<span class=\"token punctuation\">></span> textfile\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\noutput <span class=\"token punctuation\">{</span>  \n  stdout <span class=\"token punctuation\">{</span> codec =<span class=\"token punctuation\">></span> rubydebug <span class=\"token punctuation\">}</span>\n  stdout <span class=\"token punctuation\">{</span> codec =<span class=\"token punctuation\">></span> json <span class=\"token punctuation\">}</span>\n http <span class=\"token punctuation\">{</span>\n\turl =<span class=\"token punctuation\">></span> \"http<span class=\"token punctuation\">:</span>//127.0.0.1<span class=\"token punctuation\">:</span>49154/v2/log\"\n\thttp_method =<span class=\"token punctuation\">></span> \"post\"\n            format =<span class=\"token punctuation\">></span> \"json\"\n\tmapping =<span class=\"token punctuation\">></span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"message\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"%{message}\"</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"024-configremotebeatfilescode-classlanguage-texttesttxtcode\" style=\"position:relative;\"><a href=\"#024-configremotebeatfilescode-classlanguage-texttesttxtcode\" aria-label=\"024 configremotebeatfilescode classlanguage texttesttxtcode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>02.4 config/remotebeat/files/<code class=\"language-text\">test.txt</code></h3>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">logstash test txt files read</code></pre></div>\n<h2 id=\"03remotebeat-실행하기\" style=\"position:relative;\"><a href=\"#03remotebeat-%EC%8B%A4%ED%96%89%ED%95%98%EA%B8%B0\" aria-label=\"03remotebeat 실행하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>03.remotebeat 실행하기</h2>\n<ul>\n<li>\n<p>docker-compose.yml  파일 있는 위치로 이동</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">docker-compose up</code></pre></div>\n</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 684px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 13.666666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAqklEQVQI1x2Oy66DMAxE2cKKV0gB6XKzCCEREY9CCPT/v2taezGyNZqxT6J8wL/bIOQL42Sx7zucczjPk6fWGtu2wXuPEALmeca6rizyKCelhBACbdsioSN6NFBKYTQGXdehLEvUdY08z1lN03CJCrRTmTLk9X2PoihQVRX7yfT+wO4Rf8MAbSY8z8MUMUYcx8EUy7Lgui6mt9Yy3X3fTD78evQ0TVNkWYYvSGVU63g2zxQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20220809102722826\"\n        title=\"image-20220809102722826\"\n        src=\"/static/378fa10108054f2e4680162ec7ecf69f/2c288/image-20220809102722826.png\"\n        srcset=\"/static/378fa10108054f2e4680162ec7ecf69f/5a46d/image-20220809102722826.png 300w,\n/static/378fa10108054f2e4680162ec7ecf69f/0a47e/image-20220809102722826.png 600w,\n/static/378fa10108054f2e4680162ec7ecf69f/2c288/image-20220809102722826.png 684w\"\n        sizes=\"(max-width: 684px) 100vw, 684px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<ul>\n<li>위와 같이 나온경우 제대로 동작한 것</li>\n</ul>\n<h3 id=\"remotebeat에서-찍히는-것\" style=\"position:relative;\"><a href=\"#remotebeat%EC%97%90%EC%84%9C-%EC%B0%8D%ED%9E%88%EB%8A%94-%EA%B2%83\" aria-label=\"remotebeat에서 찍히는 것 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>remotebeat에서 찍히는 것</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 682px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABXUlEQVQoz01R2XKCQBDkKSpyyXIparAgyoIr4FWpPOb//6mzPSlTeeia2bm2e8ZJ9SdUPcALIqzSHN5yidl8jjzPsdvtkKYp1us19vu9xHzf/0MQBAjDUEB/aXudpBkRv2v4YQQvXCGySQ5pmgZt2yLLMhyPRxhjMAyDxLTWYk+nEzabDcqylB7P8+AU4zfI0o9WFkp+OhwOuN1uuFwu2G63OJ/P0tx1Hfq+lxgHJEkC13WFGSEDs+4LZOmTncowm72JRDKq61pkUm5VVeITHEbm/9eyWCx+Jatmgqp6uF4AlRUorYRYKRRFIYPjOBbLZsYojzIJMmWOceapzvnQBtoMGMYRxkrknsju+XximiaRe71eJUZ/tHWU/Xg8cL/fBczT8hPH2KJOt1LEJjYQ3BffHEowz2NwrzwIhxMkwHrWkKnDxebWoeX5XxL5fvnKroDgm/Z1EOboM05Q8g/IA9baVNE1mgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20220809102937185\"\n        title=\"image-20220809102937185\"\n        src=\"/static/3e12c198394074fd3f1f0e1b9ccc17b4/160a3/image-20220809102937185.png\"\n        srcset=\"/static/3e12c198394074fd3f1f0e1b9ccc17b4/5a46d/image-20220809102937185.png 300w,\n/static/3e12c198394074fd3f1f0e1b9ccc17b4/0a47e/image-20220809102937185.png 600w,\n/static/3e12c198394074fd3f1f0e1b9ccc17b4/160a3/image-20220809102937185.png 682w\"\n        sizes=\"(max-width: 682px) 100vw, 682px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h3 id=\"api-콘솔에서-찍히는것\" style=\"position:relative;\"><a href=\"#api-%EC%BD%98%EC%86%94%EC%97%90%EC%84%9C-%EC%B0%8D%ED%9E%88%EB%8A%94%EA%B2%83\" aria-label=\"api 콘솔에서 찍히는것 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>API 콘솔에서 찍히는것</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 258px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.51162790697674%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABKElEQVQoz51Ry1KDQBDMtxDFBwVJgF1ewYSCIJKHJqiUnjz4/78wTg+hrEqIBw/NzOzu9HQPI9ONaLqoBM68kKhWzzRJS7qehXQ1DTpM9G9+RH+P2GOEj1/syMs35OdbCh73FFQHITW9WHDDuFUpYTjeozbd+IxMCMeOYmUrSnefFK/fKawaspOc81bUhk+N3OtyT8mmJTerqWi/yWEH6D0jxFQohKLZspaIRiiGgvFEiV3D8bnWXOvu7JJlHGAq7IIMSjzOdflCd/qBrCiTaCcFWeFSrEMx4rBlnogH8+0H23vlHR6kjuo3+TEgtuNcFOMea8iaLxlw0TKaoM7N1qIQ5IrXAAWG01tWQgC7hu39bRmW7oNFB7ZlHXE6/RSDlrvF60H8h/AHiywkgy/XezYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20220809102600442\"\n        title=\"image-20220809102600442\"\n        src=\"/static/3949efbf76c8254ea6bc2616b349ff6b/d9489/image-20220809102600442.png\"\n        srcset=\"/static/3949efbf76c8254ea6bc2616b349ff6b/d9489/image-20220809102600442.png 258w\"\n        sizes=\"(max-width: 258px) 100vw, 258px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<ul>\n<li>\n<p>혹시나 위에처럼 api에서 못받아온다면 test.txt 파일 자체를 변경해주자</p>\n<ul>\n<li>원래 변화를 감지하여 로그를 찍어주는 것이기 때문에 문서의 내용을 변경하고 확인하면 제대로 읽어오는것을 알 수 있음</li>\n</ul>\n</li>\n</ul>","frontmatter":{"title":"로그스태시 도커 환경 구성과 동작 테스트","date":"August 09, 2022"}}},"pageContext":{"slug":"/PoC/2022-08-09-로그스태시-도커-환경-구성과-동작-테스트/","previous":{"fields":{"slug":"/DashBoard/2022-08-07-Confusion-Metrix-구현과정/"},"frontmatter":{"title":"Confusion Metrix 구현과정"}},"next":{"fields":{"slug":"/PoC/2022-08-09-Akka.Net을-이용한-환경구성-이해와-도커환경-테스트/"},"frontmatter":{"title":"Akka.Net을 이용한 환경구성 이해와 도커환경 테스트"}}}},"staticQueryHashes":["2486386679","3128451518"]}